<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>ws client</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans py-10 px-4">
<div class="max-w-3xl mx-auto bg-white shadow-lg rounded-xl p-8">
    <h2 class="text-2xl font-bold mb-6">💬 WebSocket 客户端</h2>

    <div class="mb-4">
        <label for="ws-url" class="block font-medium mb-1">选择服务器地址：</label>
        <select id="ws-url" class="w-full p-2 border border-gray-300 rounded-md">
            <option value="ws://127.0.0.1:12572" selected>ws://127.0.0.1:12572（单实例请求）</option>
            <option value="ws://127.0.0.1:15001">ws://127.0.0.1:15001（多实例请求1）</option>
            <option value="ws://127.0.0.1:15002">ws://127.0.0.1:15002（多实例请求2）</option>
            <option value="ws://127.0.0.1:15003">ws://127.0.0.1:15003（多实例请求3）</option>
            <option value="ws://127.0.0.1:9876">ws://127.0.0.1:9876（向 Nginx 请求）</option>
        </select>
    </div>

    <div class="mb-4 flex flex-wrap gap-2">
        <button id="connect-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md">
            建立连接
        </button>
        <button id="disconnect-btn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
            关闭连接
        </button>
    </div>

    <div class="mb-4 flex gap-2 flex-wrap">
        <input type="text" id="msg-txt" placeholder="请输入要发送的消息..."
               class="flex-1 p-2 border border-gray-300 rounded-md">
        <button id="send-btn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md">
            发送消息
        </button>
    </div>

    <div class="mb-2">
        <label class="block font-medium mb-1">通信日志：</label>
        <textarea id="log" readonly
                  class="w-full h-64 p-2 border border-gray-300 rounded-md font-mono text-sm bg-gray-50 resize-none"
                  placeholder="通信日志将在此显示..."></textarea>
    </div>
</div>

<script src="websocket.js"></script>
<script>
    // 事件绑定
    document.getElementById("connect-btn").addEventListener("click", () => {
        const url = document.getElementById("ws-url").value;
        ws.connect(url);
    });

    document.getElementById("disconnect-btn").addEventListener("click", () => {
        ws.disconnect();
    });

    document.getElementById("send-btn").addEventListener("click", () => {
        ws.sendMessage();
    });
</script>
</body>
</html>